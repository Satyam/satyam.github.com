<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>src&#x2F;gallery-fwt-treeview&#x2F;js&#x2F;fw-treeview.js - Satyam&#x27;s Gallery Modules</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.8.0pr2&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.8.0pr2&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="Satyam&#x27;s Gallery Modules"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Accordion.html">Accordion</a></li>
            
                <li><a href="..&#x2F;classes/AccordionPanel.html">AccordionPanel</a></li>
            
                <li><a href="..&#x2F;classes/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;classes/ButtonGroup.html">ButtonGroup</a></li>
            
                <li><a href="..&#x2F;classes/ButtonPlugin.html">ButtonPlugin</a></li>
            
                <li><a href="..&#x2F;classes/ButtonSeparator.html">ButtonSeparator</a></li>
            
                <li><a href="..&#x2F;classes/ButtonToggle.html">ButtonToggle</a></li>
            
                <li><a href="..&#x2F;classes/FlyweightTreeManager.html">FlyweightTreeManager</a></li>
            
                <li><a href="..&#x2F;classes/FlyweightTreeNode.html">FlyweightTreeNode</a></li>
            
                <li><a href="..&#x2F;classes/FWTreeNode.html">FWTreeNode</a></li>
            
                <li><a href="..&#x2F;classes/FWTreeView.html">FWTreeView</a></li>
            
                <li><a href="..&#x2F;classes/GalleryModel.html">GalleryModel</a></li>
            
                <li><a href="..&#x2F;classes/GalleryModelChronologicalUndo.html">GalleryModelChronologicalUndo</a></li>
            
                <li><a href="..&#x2F;classes/GalleryModelMultiRecord.html">GalleryModelMultiRecord</a></li>
            
                <li><a href="..&#x2F;classes/GalleryModelPrimaryKeyIndex.html">GalleryModelPrimaryKeyIndex</a></li>
            
                <li><a href="..&#x2F;classes/GalleryModelSimpleUndo.html">GalleryModelSimpleUndo</a></li>
            
                <li><a href="..&#x2F;classes/GalleryModelSortedMultiRecord.html">GalleryModelSortedMultiRecord</a></li>
            
                <li><a href="..&#x2F;classes/IButton.html">IButton</a></li>
            
                <li><a href="..&#x2F;classes/MakeNode.html">MakeNode</a></li>
            
                <li><a href="..&#x2F;classes/Node.html">Node</a></li>
            
                <li><a href="..&#x2F;classes/Spinner.html">Spinner</a></li>
            
                <li><a href="..&#x2F;classes/StdMod.html">StdMod</a></li>
            
                <li><a href="..&#x2F;classes/TimeSpinner.html">TimeSpinner</a></li>
            
                <li><a href="..&#x2F;classes/Y.Timeline.html">Y.Timeline</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/gallery-button-plugin.html">gallery-button-plugin</a></li>
            
                <li><a href="..&#x2F;modules/gallery-flyweight-tree.html">gallery-flyweight-tree</a></li>
            
                <li><a href="..&#x2F;modules/gallery-fwt-treeview.html">gallery-fwt-treeview</a></li>
            
                <li><a href="..&#x2F;modules/gallery-makenode.html">gallery-makenode</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-accordion.html">gallery-md-accordion</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-button.html">gallery-md-button</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-button-group.html">gallery-md-button-group</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-ibutton.html">gallery-md-ibutton</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-model.html">gallery-md-model</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-spinner.html">gallery-md-spinner</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-timespinner.html">gallery-md-timespinner</a></li>
            
                <li><a href="..&#x2F;modules/gallery-stdmod.html">gallery-stdmod</a></li>
            
                <li><a href="..&#x2F;modules/timeline.html">timeline</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: src&#x2F;gallery-fwt-treeview&#x2F;js&#x2F;fw-treeview.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
 * TreeView widget.
 * It creates the tree based on an object passed as the &#x60;tree&#x60; attribute in the constructor.
 * @example
 *
    var tv = new Y.FWTreeView({tree: [
        {
            label:&#x27;label 0&#x27;,
            children: [
                {
                    label: &#x27;label 0-0&#x27;,
                    children: [
                        {label: &#x27;label 0-0-0&#x27;},
                        {label: &#x27;label 0-0-1&#x27;}
                    ]
                },
                {label: &#x27;label 0-1&#x27;}
            ]
        },
        {label: &#x27;label 1&#x27;}

    ]});
    tv.render(&#x27;#container&#x27;);

 *
 * @class FWTreeView
 * @extends FlyweightTreeManager
 * @constructor
 * @param config {Object} Configuration attributes, amongst them:
 * @param config.tree {Array} Array of strings or objects defining the first level of nodes.
 * If a string, it will be used as the label, if an object, it may contain:
 * @param config.tree.label {String} Text of HTML markup to be shown in the node
 * @param [config.tree.expanded=true] {Boolean} Whether the children of this node should be visible.
 * @param [config.tree.children] {Array} Further definitions for the children of this node
 * @param [config.tree.type=FWTreeNode] {FWTreeNode | String} Class used to create instances for this node.
 * It can be a reference to an object or a name that can be resolved as &#x60;Y[name]&#x60;.
 * @param [config.tree.id=Y.guid()] {String} Identifier to assign to the DOM element containing this node.
 * @param [config.tree.template] {String} Template for this particular node.
 *&#x2F;
FWTV = Y.Base.create(
    NAME,
    Y.FlyweightTreeManager,
    [],
    {
        &#x2F;**
         * Array of iNodes containing a flat list of all nodes visible regardless
         * of their depth in the tree.
         * Used to handle keyboard navigation.
         * @property _visibleSequence
         * @type Array or null
         * @default null
         * @private
         *&#x2F;
        _visibleSequence: null,
        &#x2F;**
         * Index, within {{#crossLink &quot;_visibleSequence&quot;}}{{&#x2F;crossLink}}, of the iNode having the focus.
         * Used for keyboard navigation.
         * @property _visibleIndex
         * @type Integer
         * @default null
         * @private
         *&#x2F;
        _visibleIndex: null,
        &#x2F;**
         * Widget lifecycle method
         * @method initializer
         * @param config {object} configuration object of which
         * &#x60;tree&#x60; contains the tree configuration.
         *&#x2F;
        initializer: function (config) {
            this._domEvents = [&#x27;click&#x27;];
            this._loadConfig(config.tree);
        },
        &#x2F;**
         * Overrides the same function to process the selected attribute
         * @method _initNodes
         * @param parentINode {Object} Parent of the iNodes to be set
         * @protected
         *&#x2F;
        _initNodes: function (parentINode) {
            FWTV.superclass._initNodes.call(this, parentINode);
            parentINode[SELECTED] = parentINode[SELECTED]?FULLY_SELECTED:NOT_SELECTED;
        },
        &#x2F;**
         * Widget lifecyle method.
         * Adds the &#x60;tree&#x60; role to the content box.
         * @method renderUI
         * @protected
         *&#x2F;
        renderUI: function () {
            FWTV.superclass.renderUI.apply(this, arguments);
            this.get(CBX).set(&#x27;role&#x27;,&#x27;tree&#x27;);
        },
        &#x2F;**
         * Widget lifecyle method.
         * Sets the keydown listener to handle keyboard navigation.
         * @method bindUI
         * @protected
         *&#x2F;
        bindUI: function () {
            FWTV.superclass.bindUI.apply(this, arguments);
            this._eventHandles.push(this.get(CBX).on(&#x27;keydown&#x27;, this._onKeyDown, this));
        },
        &#x2F;**
         * Listener for keyboard events to handle keyboard navigation
         * @method _onKeyDown
         * @param ev {EventFacade} Standard YUI key facade
         * @private
         *&#x2F;
        _onKeyDown: function (ev) {
            var self = this,
                key = ev.keyCode,
                iNode = this._focusedINode,
                seq = this._visibleSequence,
                index = this._visibleIndex,
                fwNode,
                fireKey = function (which) {
                    fwNode = self._poolFetch(iNode);
                    ev.container = ev.target;
                    ev.target = Y.one(HASH + iNode.id);
                    self.fire(which, {
                        domEvent:ev,
                        node: fwNode
                    });
                    fwNode.fire(which);
                };
            if(iNode) {

                switch (key) {
                    case 38: &#x2F;&#x2F; up
                        if (!seq) {
                            seq = this._rebuildSequence();
                            index = seq.indexOf(iNode);
                        }
                        index -=1;
                        if (index &gt;= 0) {
                            iNode = seq[index];
                            self._visibleIndex = index;
                        } else {
                            iNode = null;
                        }
                        break;
                    case 39: &#x2F;&#x2F; right
                        fwNode = self._poolFetch(iNode);
                        if (fwNode.get(EXPANDED)) {
                            if (iNode.children &amp;&amp; iNode.children.length) {
                                iNode = iNode.children[0];
                            } else {
                                iNode = null;
                            }
                        } else {
                            fwNode.set(EXPANDED, true);
                            iNode = null;
                        }
                        break;
                    case 40: &#x2F;&#x2F; down
                        if (!seq) {
                            seq = self._rebuildSequence();
                            index = seq.indexOf(iNode);
                        }
                        index +=1;
                        if (index &lt; seq.length) {
                            iNode = seq[index];
                            self._visibleIndex = index;
                        } else {
                            iNode = null;
                        }
                        break;
                    case 37: &#x2F;&#x2F; left
                        fwNode = self._poolFetch(iNode);
                        if (fwNode.get(EXPANDED) &amp;&amp; iNode.children) {
                            fwNode.set(EXPANDED, false);
                            iNode = null;
                        } else {
                            iNode = iNode._parent;
                            if (iNode === self._tree) {
                                iNode = null;
                            }
                        }

                        break;
                    case 36: &#x2F;&#x2F; home
                        iNode = self._tree.children &amp;&amp; self._tree.children[0];
                        break;
                    case 35: &#x2F;&#x2F; end
                        index = self._tree.children &amp;&amp; self._tree.children.length;
                        if (index) {
                            iNode = self._tree.children[index -1];
                        } else {
                            iNode = null;
                        }
                        break;
                    case 13: &#x2F;&#x2F; enter
                        fireKey(&#x27;enterkey&#x27;);
                        iNode = null;
                        break;
                    case 32: &#x2F;&#x2F; spacebar
                        fireKey(&#x27;spacebar&#x27;);
                        iNode = null;
                        break;
                    case 106: &#x2F;&#x2F; asterisk on the numeric keypad
                        self.expandAll();
                        break;
                    default: &#x2F;&#x2F; initial
                        iNode = null;
                        break;
                }
                if (fwNode) {
                    self._poolReturn(fwNode);
                }
                if (iNode) {
                    self._focusOnINode(iNode);
                    ev.halt();
                    return false;
                }
            }
            return true;
        },
        &#x2F;**
         * Listener for the focus event.
         * Updates the node receiving the focus when the widget gets the focus.
         * @method _aferFocus
         * @param ev {EventFacade} Standard event facade
         * @private
         *&#x2F;
        _afterFocus: function (ev) {
            var iNode = this._findINodeByElement(ev.domEvent.target);
            this._focusOnINode(iNode);
            if (this._visibleSequence) {
                this._visibleIndex = this._visibleSequence.indexOf(iNode);
            }
        },
        &#x2F;**
         * Rebuilds the array of {{#crossLink &quot;_visibleSequence&quot;}}{{&#x2F;crossLink}} that can be traversed with the up&#x2F;down arrow keys
         * @method _rebuildSequence
         * @private
         *&#x2F;
        _rebuildSequence: function () {
            var seq = [],
                root = this.getRoot(),
                forOneLevel = function (fwNode) {
                    if (fwNode.get(EXPANDED)) {
                        fwNode.forSomeChildren(function (fwNode) {
                            seq.push(fwNode._iNode);
                            forOneLevel(fwNode);
                        });
                    }
                };
            forOneLevel(root);
            root.release();
            return (this._visibleSequence = seq);

        },
        &#x2F;**
         * Overrides the default CONTENT_TEMPLATE to make it an unordered list instead of a div
         * @property CONTENT_TEMPLATE
         * @type String
         *&#x2F;
        CONTENT_TEMPLATE: &#x27;&lt;ul&gt;&lt;&#x2F;ul&gt;&#x27;

    },
    {
        ATTRS: {
            &#x2F;**
             * Override for the &#x60;defaultType&#x60; value of FlyweightTreeManager
             * so it creates FWTreeNode instances instead of the default.
             * @attribute defaultType
             * @type String
             * @default &#x27;FWTreeNode&#x27;
             *&#x2F;
            defaultType: {
                value: &#x27;FWTreeNode&#x27;
            },
            &#x2F;**
             * Enables toggling by clicking on the label item instead of just the toggle icon.
             * @attribute toggleOnLabelClick
             * @type Boolean
             * @default false
             *&#x2F;
            toggleOnLabelClick: {
                value:false,
                validator:Lang.isBoolean
            }
        }
    }
);

&#x2F;**
 * TreeView provides all the events that Widget relays from the DOM.
 * It adds an additional property to the EventFacade called &#x60;node&#x60;
 * that points to the TreeNode instance that received the event.
 *
 * This instance is pooled and will be discarded upon return from the listener.
 * If you need to hold on to this instance,
 * use the {{#crossLink &quot;TreeNode&#x2F;hold&quot;}}{{&#x2F;crossLink}} method to preserve it.
 * @event -any DOM event-
 * @param type {String} The full name of the event fired
 * @param ev {EventFacade} Standard YUI event facade for DOM events plus:
 * @param ev.node {TreeNode} TreeNode instance that received the event
 *&#x2F;
&#x2F;**
 * Fires when the space bar is pressed.
 * Used internally to toggle node selection.
 * @event spacebar
 * @param ev {EventFacade} YUI event facade for keyboard events, including:
 * @param ev.domEvent {Object} The original event produced by the DOM, except:
 * @param ev.domEvent.target {Node} The DOM element that had the focus when the key was pressed
 * @param ev.node {FWTreeNode} The node that had the focus when the key was pressed
 *&#x2F;
&#x2F;**
 * Fires when the enter key is pressed.
 * @event enterkey
 * @param ev {EventFacade} YUI event facade for keyboard events, including:
 * @param ev.domEvent {Object} The original event produced by the DOM, except:
 * @param ev.domEvent.target {Node} The DOM element that had the focus when the key was pressed
 * @param ev.node {FWTreeNode} The node that had the focus when the key was pressed
 *&#x2F;
Y.FWTreeView = FWTV;
    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
