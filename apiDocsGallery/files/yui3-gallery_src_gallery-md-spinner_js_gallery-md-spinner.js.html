<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>yui3-gallery&#x2F;src&#x2F;gallery-md-spinner&#x2F;js&#x2F;gallery-md-spinner.js - Satyam&#x27;s Gallery Modules</title>
    <link rel="stylesheet" href="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;3.5.1&#x2F;build&#x2F;cssgrids&#x2F;cssgrids-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/vendor/prettify/prettify-min.css">
    <link rel="stylesheet" href="..&#x2F;assets/css/main.css" id="site_styles">
    <link rel="shortcut icon" type="image/png" href="..&#x2F;assets/favicon.png">
    <script src="http:&#x2F;&#x2F;yui.yahooapis.com&#x2F;combo?3.5.1&#x2F;build&#x2F;yui&#x2F;yui-min.js"></script>
</head>
<body class="yui3-skin-sam">

<div id="doc">
    <div id="hd" class="yui3-g header">
        <div class="yui3-u-3-4">
            
                <h1><img src="..&#x2F;assets/css/logo.png" title="Satyam&#x27;s Gallery Modules"></h1>
            
        </div>
        <div class="yui3-u-1-4 version">
            <em>API Docs for: </em>
        </div>
    </div>
    <div id="bd" class="yui3-g">

        <div class="yui3-u-1-4">
            <div id="docs-sidebar" class="sidebar apidocs">
                <div id="api-list">
    <h2 class="off-left">APIs</h2>
    <div id="api-tabview" class="tabview">
        <ul class="tabs">
            <li><a href="#api-classes">Classes</a></li>
            <li><a href="#api-modules">Modules</a></li>
        </ul>

        <div id="api-tabview-filter">
            <input type="search" id="api-filter" placeholder="Type to filter APIs">
        </div>

        <div id="api-tabview-panel">
            <ul id="api-classes" class="apis classes">
            
                <li><a href="..&#x2F;classes/Accordion.html">Accordion</a></li>
            
                <li><a href="..&#x2F;classes/AccordionPanel.html">AccordionPanel</a></li>
            
                <li><a href="..&#x2F;classes/Button.html">Button</a></li>
            
                <li><a href="..&#x2F;classes/ButtonGroup.html">ButtonGroup</a></li>
            
                <li><a href="..&#x2F;classes/ButtonPlugin.html">ButtonPlugin</a></li>
            
                <li><a href="..&#x2F;classes/ButtonSeparator.html">ButtonSeparator</a></li>
            
                <li><a href="..&#x2F;classes/ButtonToggle.html">ButtonToggle</a></li>
            
                <li><a href="..&#x2F;classes/IButton.html">IButton</a></li>
            
                <li><a href="..&#x2F;classes/MakeNode.html">MakeNode</a></li>
            
                <li><a href="..&#x2F;classes/Node.html">Node</a></li>
            
                <li><a href="..&#x2F;classes/Spinner.html">Spinner</a></li>
            
                <li><a href="..&#x2F;classes/StdMod.html">StdMod</a></li>
            
                <li><a href="..&#x2F;classes/TimeSpinner.html">TimeSpinner</a></li>
            
                <li><a href="..&#x2F;classes/Y.FlyweightTreeManager.html">Y.FlyweightTreeManager</a></li>
            
                <li><a href="..&#x2F;classes/Y.FlyweightTreeNode.html">Y.FlyweightTreeNode</a></li>
            
                <li><a href="..&#x2F;classes/Y.FWTreeNode.html">Y.FWTreeNode</a></li>
            
                <li><a href="..&#x2F;classes/Y.FWTreeView.html">Y.FWTreeView</a></li>
            
                <li><a href="..&#x2F;classes/Y.GalleryModel.html">Y.GalleryModel</a></li>
            
                <li><a href="..&#x2F;classes/Y.GalleryModelChronologicalUndo.html">Y.GalleryModelChronologicalUndo</a></li>
            
                <li><a href="..&#x2F;classes/Y.GalleryModelMultiRecord.html">Y.GalleryModelMultiRecord</a></li>
            
                <li><a href="..&#x2F;classes/Y.GalleryModelPrimaryKeyIndex.html">Y.GalleryModelPrimaryKeyIndex</a></li>
            
                <li><a href="..&#x2F;classes/Y.GalleryModelSimpleUndo.html">Y.GalleryModelSimpleUndo</a></li>
            
                <li><a href="..&#x2F;classes/Y.GalleryModelSortedMultiRecord.html">Y.GalleryModelSortedMultiRecord</a></li>
            
                <li><a href="..&#x2F;classes/Y.Timeline.html">Y.Timeline</a></li>
            
            </ul>

            <ul id="api-modules" class="apis modules">
            
                <li><a href="..&#x2F;modules/flyweight-tree-manager.html">flyweight-tree-manager</a></li>
            
                <li><a href="..&#x2F;modules/flyweight-tree-tnode.html">flyweight-tree-tnode</a></li>
            
                <li><a href="..&#x2F;modules/fw-treenode.html">fw-treenode</a></li>
            
                <li><a href="..&#x2F;modules/fw-treeview.html">fw-treeview</a></li>
            
                <li><a href="..&#x2F;modules/gallery-button-plugin.html">gallery-button-plugin</a></li>
            
                <li><a href="..&#x2F;modules/gallery-flyweight-tree.html">gallery-flyweight-tree</a></li>
            
                <li><a href="..&#x2F;modules/gallery-fwt-treeview.html">gallery-fwt-treeview</a></li>
            
                <li><a href="..&#x2F;modules/gallery-makenode.html">gallery-makenode</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-accordion.html">gallery-md-accordion</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-button.html">gallery-md-button</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-button-group.html">gallery-md-button-group</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-ibutton.html">gallery-md-ibutton</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-model.html">gallery-md-model</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-spinner.html">gallery-md-spinner</a></li>
            
                <li><a href="..&#x2F;modules/gallery-md-timespinner.html">gallery-md-timespinner</a></li>
            
                <li><a href="..&#x2F;modules/gallery-stdmod.html">gallery-stdmod</a></li>
            
                <li><a href="..&#x2F;modules/timeline.html">timeline</a></li>
            
            </ul>
        </div>
    </div>
</div>

            </div>
        </div>
        <div class="yui3-u-3-4">
                <div id="api-options">
        Show:
        <label for="api-show-inherited">
            <input type="checkbox" id="api-show-inherited" checked>
            Inherited
        </label>

        <label for="api-show-protected">
            <input type="checkbox" id="api-show-protected">
            Protected
        </label>

        <label for="api-show-private">
            <input type="checkbox" id="api-show-private">
            Private
        </label>
        <label for="api-show-deprecated">
            <input type="checkbox" id="api-show-deprecated">
            Deprecated
        </label>

    </div>


            <div class="apidocs">
                <div id="docs-main">
                    <div class="content">
                        <h1 class="file-heading">File: yui3-gallery&#x2F;src&#x2F;gallery-md-spinner&#x2F;js&#x2F;gallery-md-spinner.js</h1>

<div class="file">
    <pre class="code prettyprint linenums">
&#x2F;**
* Shows an input box with a set of up&#x2F;down buttons to change its value.
* @module gallery-md-spinner
* @class Spinner
* @constructor
* @extends Widget
* @uses MakeNode
*&#x2F;
&quot;use strict&quot;;

var Lang = Y.Lang,
	CBX = &#x27;contentBox&#x27;,
	VALUE = &#x27;value&#x27;,
	CHANGE = &#x27;Change&#x27;,
	INPUT = &#x27;input&#x27;,
	INPUT_ERROR = &#x27;inputError&#x27;,
	UP = &#x27;up&#x27;,
	DOWN = &#x27;down&#x27;,
	UI = &#x27;ui&#x27;,
	PARSER = &#x27;parser&#x27;,
	FORMATTER = &#x27;formatter&#x27;,
	MIN = &#x27;min&#x27;,
	MAX = &#x27;max&#x27;,
	WRAPAROUND = &#x27;wraparound&#x27;,
	WRAPPED = &#x27;wrapped&#x27;;
	
Y.Spinner = Y.Base.create(
	&#x27;spinner&#x27;,
	Y.Widget,
	[Y.MakeNode],
	{
	
		&#x2F;**
		 * Renders the HTML elements of this component.  
		 * Uses the TEMPLATE static variable to produce the markup.
		 * Calls _locateNodes to get the references to the elements created.
		 * @method renderUI
		 *&#x2F;
		renderUI : function() {
			this.get(CBX).append(this._makeNode());
			this._locateNodes();
		},

		&#x2F;**
		 * Bounding box mouse down handler. Will determine if the mouse down
		 * is on one of the spinner buttons, and increment&#x2F;decrement the value
		 * accordingly.
		 * 
		 * The method also sets up a timer, to support the user holding the mouse
		 * down on the spinner buttons. The timer is cleared when a mouse up event
		 * is detected.
		 * @method _afterBoundingBoxMousedown
		 * @param ev {EventFacade} Event facade produced by the event handler
		 * @private
		 *&#x2F;
		_afterBoundingBoxMousedown : function(ev) {
			var node = ev.target,
				dir,
				handled = false,
				value = this.get(VALUE),
				minorStep = this.get(&quot;minorStep&quot;);

			if (node.hasClass(this._classNames.up)) {
				this.set(VALUE, value + minorStep);
				dir = 1;
				handled = true;
			} else if (node.hasClass(this._classNames.down)) {
				this.set(VALUE, value - minorStep);
				dir = -1;
				handled = true;
			}

			if (handled) {
				this._setMouseDownTimers(dir, minorStep);
			}
		},

		&#x2F;**
		 * Override the default content box value, since we don&#x27;t want the srcNode
		 * to be the content box for spinner.
		 * @property _defaultCB
		 * @type HTMLElement
		 * @private
		 *&#x2F;
		_defaultCB : function() {
			return null;
		},

		&#x2F;**
		 * Document mouse up handler. Clears the timers supporting
		 * the &quot;mouse held down&quot; behavior.
		 * @method _afterDocumentMouseup
		 * @private
		 *&#x2F;
		_afterDocumentMouseup : function() {
			this._clearMouseDownTimers();
		},

		&#x2F;**
		 * Bounding box Arrow up&#x2F;down, Page up&#x2F;down key listener.
		 *
		 * Increments&#x2F;Decrement the spinner value, based on the key pressed.
		 * @method _onDirectionKey
		 * @param ev {EventFacade} as provided by the key listener
		 * @private
		 *&#x2F;
		_onDirectionKey : function(ev) {

			ev.preventDefault();

			var value = this.get(VALUE),
				minorStep = this.get(&quot;minorStep&quot;),
				majorStep = this.get(&quot;majorStep&quot;);

			switch (ev.charCode) {
				case 38:
					value += minorStep;
					break;
				case 40:
					value -= minorStep;
					break;
				case 33:
					value += majorStep;
					break;
				case 34:
					value -= majorStep;
					break;
			}
			this.set(VALUE, value);
		},

		&#x2F;**
		 * Simple change handler, to make sure user does not input an invalid value.
		 * If an error is detected, focus will return to the input box and the input box highlighted briefly.
		 * @method _afterInputChange
		 * @private
		 *&#x2F;
		_afterInputChange : function() {
			var inputEl = this._inputNode,
				value = this.get(PARSER)(inputEl.get(VALUE));
				
			&#x2F;&#x2F; It validates it to prevent the wraparound method from wrapping it around and masking the input error.
			if (this._validateValue(value)) {  
				this.set(VALUE, value);
			} else {
				&#x2F;&#x2F; this._uiSetValue(this.get(VALUE));
				inputEl.focus();
				inputEl.addClass(this._classNames[INPUT_ERROR]);
				Y.later(1000, this, function () {
					inputEl.removeClass(this._classNames[INPUT_ERROR]);
				});
			}
		},
		&#x2F;**
		 * Default parser for the user input.  It assumes only integers are expected
		 * @method parser
		 * @param value {string} value read from the input box
		 * @return {integer} parsed value
		 *&#x2F;
		parser: function (value) {
			return parseInt(value, 10);
		},
		&#x2F;**
		 * Formats the internal value to be shown to the user
		 * @method formatter
		 * @param value {integer} value to be shown
		 * @return {string} formatted value actually displayed
		 *&#x2F;
		formatter: function (value) {
			return value;
		},

		&#x2F;**
		 * Initiates mouse down timers, to increment slider, while mouse button
		 * is held down
		 * @method _setMouseDownTimers
		 * @param dir {1 | -1} Direction, up or down, to change at each tick
		 * @param step {number} Amount to change on each tick
		 * @private
		 *&#x2F;
		_setMouseDownTimers : function(dir, step) {
			this._mouseDownTimer = Y.later(500, this, function() {
				this._mousePressTimer = Y.later(100, this, function() {
					this.set(VALUE, this.get(VALUE)  + (dir * step));
				}, null, true);
			});
		},
		&#x2F;**
		 * If attribute &lt;a href=&quot;#config_wraparound&quot;&gt;&lt;code&gt;wraparound&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; is true this method is set as a before listener 
		 * for the &lt;a href=&quot;#event_valueChange&quot;&gt;&lt;code&gt;valueChange&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; event.
		 * When one end of the range is reached, it will make it jump to the other end. 
		 * Changes the newVal property of the event facade, which will be the new value for the attribute.
		 * If stepping by more than one, it will advance the value
		 * by the remaining amount of the step.
		 * Fires the &lt;a href=&quot;#event_wrapped&quot;&gt;&lt;code&gt;wrapped&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; event when the value is wrapped around.
		 * @method _wrap
		 * @param ev {EventFacade}
		 * @private
		 *&#x2F;
		&#x2F;**
		 * Fires when one end of the range is reached and the value is folded to the other end.
		 * @event wrapped
		 * @param prevVal {number} value that triggered the wrapping
		 * @param newVal {number} new value after wrapping
		 *&#x2F;
		_wrap: function (ev) {
			var max = this.get(MAX),
				min = this.get(MIN),
				value = ev.newVal;
			if (value &gt; max) {
				value -= max - min + 1;
				this.fire(WRAPPED,{prevVal:ev.newVal, newVal: value});
			} else if (value &lt; min) {
				value += max - min + 1;
				this.fire(WRAPPED,{prevVal:ev.newVal, newVal: value});
			}
			ev.newVal = value;
		},
		&#x2F;**
		 * Clears timers used to support the &quot;mouse held down&quot; behavior
		 * @method _clearMouseDownTimers
		 * @private
		 *&#x2F;
		_clearMouseDownTimers : function() {
			if (this._mouseDownTimer) {
				this._mouseDownTimer.cancel();
				this._mouseDownTimer = null;
			}
			if (this._mousePressTimer) {
				this._mousePressTimer.cancel();
				this._mousePressTimer = null;
			}
		},

		&#x2F;**
		 * Updates the value of the input box to reflect 
		 * the value passed in through the &lt;code&gt;value&lt;&#x2F;code&gt; configuration attribute
		 * @method _uiSetValue
		 * @param value {integer} new value to be set
		 * @param src {string} source of the new value.  If the source is &#x27;ui&#x27; the change will be ignored.
		 * @private
		 *&#x2F;
		_uiSetValue : function(value,src) {
			if (src === UI) {
				return;
			}
			this._inputNode.set(VALUE, this.get(FORMATTER)(value));
		},
		&#x2F;**
		 * Attaches the &lt;a href=&quot;#method__wrap&quot;&gt;&lt;code&gt;_wrap&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; method as a before-event listener 
		 * when &lt;a href=&quot;#config_wraparound&quot;&gt;&lt;code&gt;wraparound&lt;&#x2F;code&gt;&lt;&#x2F;a&gt; is set.
		 * @method _uiSetWraparound
		 * @param value {Boolean} value of wraparound attribute
		 * @private
		 *&#x2F;
		_uiSetWraparound: function (value) {
			if (value) {
				this._wrapListener =  this.on(VALUE + CHANGE, this._wrap, this);
			} else {
				if (this._wrapListener) {
					this._wrapListener.detach();
				}
			}
		},

		&#x2F;**
		 * value attribute default validator. Verifies that
		 * the value being set lies between the min&#x2F;max value
		 * @method _validateValue
		 * @param val {number} value to be validated
		 * @return {Boolean} true if within bounds
		 * @private
		 *&#x2F;
		_validateValue: function(val) {
			return val &gt;= this.get(MIN) &amp;&amp; val &lt;= this.get(MAX);
		}
	},
	{
		&#x2F;**
		 * MakeNode template for this component
		 * @property _TEMPLATE
		 * @type String
		 * @static
		 * @protected
		 *&#x2F;
		_TEMPLATE: [
			&#x27;&lt;input type=&quot;text&quot; title=&quot;{s input}&quot; class=&quot;{c input}&quot;&gt;&#x27;,
			&#x27;&lt;button type=&quot;button&quot; title=&quot;{s up}&quot; class=&quot;{c up}&quot;&gt;&lt;&#x2F;button&gt;&#x27;,
			&#x27;&lt;button type=&quot;button&quot; title=&quot;{s down}&quot; class=&quot;{c down}&quot;&gt;&lt;&#x2F;button&gt;&#x27;
		].join(&#x27;\n&#x27;),
		&#x2F;**
		 * List of CSS class name suffixes to be generated and used in the template
		 * @property _CLASS_NAMES
		 * @type [String]
		 * @static
		 * @protected
		 *&#x2F;
		_CLASS_NAMES: [INPUT, UP, DOWN, INPUT_ERROR],
		&#x2F;**
		 * Descriptor of DOM events to be listened to and the methods to handle them
		 * @property _EVENTS
		 * @type Object
		 * @static
		 * @protected
		 *&#x2F;
		_EVENTS: {
			boundingBox: [
				{
					type: &#x27;key&#x27;,
					fn:&#x27;_onDirectionKey&#x27;,
					args:((!Y.UA.opera) ? &quot;down:&quot; : &quot;press:&quot;) + &quot;38, 40, 33, 34&quot;
				},
				&#x27;mousedown&#x27;
			],
			document: &#x27;mouseup&#x27;,
			input: &#x27;change&#x27;
		},
		ATTRS: {
			&#x2F;**
			 * The minimum value for the spinner.
			 * @attribute min
			 * @type number
			 * @default 0
			 *&#x2F;
			min : {
				value:0
			},

			&#x2F;**
			 * The maximum value for the spinner.
			 * @attribute min
			 * @type number
			 * @default 100
			 *&#x2F;
			max : {
				value:100
			},

			&#x2F;**
			 * The current value of the spinner.
			 * @attribute value
			 * @type number
			 * @default 0
			 *&#x2F;
			value : {
				value:0,
				validator: &#x27;_validateValue&#x27;
			},

			&#x2F;**
			 * Amount to increment&#x2F;decrement the spinner when the buttons or arrow up&#x2F;down keys are pressed.
			 * @attribute minorStep
			 * @type number
			 * @default 1
			 *&#x2F;
			minorStep : {
				value:1
			},

			&#x2F;**
			 * Amount to increment&#x2F;decrement the spinner when the page up&#x2F;down keys are pressed.
			 * @attribute majorStep
			 * @type number
			 * @default 10
			 *&#x2F;
			majorStep : {
				value:10
			},

			&#x2F;**
			 * override default (&quot;null&quot;), required for focus()
			 * @attribute tabIndex
			 * @type integer
			 * @default 0
			 *&#x2F;
			tabIndex: {
				value: 0
			},

			&#x2F;**
			 * The strings for the spinner UI (used in the tooltip texts)
			 * @attribute strings
			 * @type hash
			 *&#x2F;
			strings: {
				value: {
					input: &quot;Press the arrow up&#x2F;down keys for minor increments, page up&#x2F;down for major increments.&quot;,
					up: &quot;Increment&quot;,
					down: &quot;Decrement&quot;
				}
			},
			&#x2F;**
			 * Function to format the value to be shown to the user
			 * @attribute formatter
			 * @type function
			 * @default this.formatter
			 *&#x2F;
			formatter: {
				valueFn: function() {
					return this.formatter;
				},
				validator: Lang.isFunction
			},
			&#x2F;**
			 * Function to format the value entered by the user
			 * @attribute parser
			 * @type function
			 * @default this.parser
			 *&#x2F;
			parser: {
				valueFn: function() {
					return this.parser;
				},
				validator: Lang.isFunction
			},
			&#x2F;**
			 * Whether the values should wrap around to the other end when one end of the range is reached
			 * @attribute wraparound
			 * @type Boolean
			 * @default false
			 *&#x2F;
			wraparound: {
				value: false,
				validator: Lang.isBoolean
			}
		},
		&#x2F;**
		 * Adds the &lt;code&gt;value&lt;&#x2F;code&gt; attribute to the list of attributes whose change needs to be reflected in the UI
		 * @property _ATTRS_2_UI
		 * @type Object
		 * @static
		 * @protected
		 *&#x2F;
		_ATTRS_2_UI: {
			BIND: [VALUE, WRAPAROUND],
			SYNC: [VALUE, WRAPAROUND]
		},
		&#x2F;**
		 * Tells Widget to read the value from the input box if any existing markup is found
		 * @property HTML_PASER
		 * @type Object
		 * @static
		 *&#x2F;
		HTML_PARSER: {
			value: function (srcNode) {
				var val = parseInt(srcNode.get(VALUE),10); 
				return Lang.isNumber(val) ? val : null;
			}
		}
	}
);

    </pre>
</div>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<script src="..&#x2F;assets/vendor/prettify/prettify-min.js"></script>
<script>prettyPrint();</script>
<script src="..&#x2F;assets/js/yui-prettify.js"></script>
<script src="..&#x2F;assets/../api.js"></script>
<script src="..&#x2F;assets/js/api-filter.js"></script>
<script src="..&#x2F;assets/js/api-list.js"></script>
<script src="..&#x2F;assets/js/api-search.js"></script>
<script src="..&#x2F;assets/js/apidocs.js"></script>
</body>
</html>
